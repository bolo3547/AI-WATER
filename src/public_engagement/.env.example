# Public Engagement Module - Environment Variables

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/aquawatch_nrw
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# =============================================================================
# MULTI-TENANT CONFIGURATION
# =============================================================================
# Default tenant for development
DEFAULT_TENANT_ID=lwsc-zambia

# =============================================================================
# RATE LIMITING
# =============================================================================
# Maximum reports per IP per hour
RATE_LIMIT_REPORTS_PER_IP=5
RATE_LIMIT_WINDOW_SECONDS=3600

# Maximum reports per phone number per day
RATE_LIMIT_REPORTS_PER_PHONE=3
RATE_LIMIT_PHONE_WINDOW_SECONDS=86400

# Redis URL for distributed rate limiting (optional)
# If not set, uses in-memory rate limiting (not suitable for multi-instance)
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# WHATSAPP BUSINESS API
# =============================================================================
WHATSAPP_API_TOKEN=your_whatsapp_cloud_api_token
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your_webhook_verify_token
WHATSAPP_BUSINESS_ACCOUNT_ID=your_business_account_id

# =============================================================================
# USSD GATEWAY
# =============================================================================
USSD_GATEWAY_URL=https://your-ussd-gateway.com/api
USSD_API_KEY=your_ussd_api_key
USSD_SHORT_CODE=*123#

# =============================================================================
# MEDIA STORAGE (S3-compatible)
# =============================================================================
MEDIA_STORAGE_BACKEND=s3
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=aquawatch-public-reports
AWS_S3_REGION=af-south-1

# For local development, can use MinIO
# MINIO_ENDPOINT=localhost:9000
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=minioadmin

# =============================================================================
# SPAM DETECTION
# =============================================================================
# Enable/disable spam detection
SPAM_DETECTION_ENABLED=true

# Quarantine suspicious reports instead of rejecting
SPAM_QUARANTINE_MODE=true

# Text patterns to flag (comma-separated regex)
SPAM_TEXT_PATTERNS=buy now,click here,free money,test test

# =============================================================================
# DUPLICATE DETECTION
# =============================================================================
# Radius in meters for duplicate detection
DUPLICATE_RADIUS_METERS=100

# Time window in minutes for duplicate detection
DUPLICATE_TIME_WINDOW_MINUTES=30

# =============================================================================
# NOTIFICATIONS
# =============================================================================
# SMS Gateway for reporter notifications
SMS_GATEWAY_URL=https://your-sms-gateway.com/api
SMS_API_KEY=your_sms_api_key
SMS_SENDER_ID=AquaWatch

# Email for admin notifications
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=notifications@aquawatch.com
SMTP_PASSWORD=your_smtp_password
ADMIN_NOTIFICATION_EMAIL=admin@utility.com

# =============================================================================
# FRONTEND URLs
# =============================================================================
PUBLIC_REPORT_URL=https://report.aquawatch.io
ADMIN_DASHBOARD_URL=https://dashboard.aquawatch.io

# =============================================================================
# SECURITY
# =============================================================================
# Secret key for JWT tokens (generate with: openssl rand -hex 32)
SECRET_KEY=your_secret_key_here

# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://dashboard.aquawatch.io

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_WHATSAPP_BOT=true
FEATURE_USSD_FLOW=true
FEATURE_PHOTO_UPLOAD=true
FEATURE_AI_LEAK_LINKING=true
FEATURE_WORK_ORDER_CREATION=true
